{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{BrowserRouter as Router,Route,Switch,Redirect}from'react-router-dom';import HomePage from\"./home/HomePage\";import AboutPage from\"./home/AboutPage\";import Navbar from'./nav/Navbar';import WelcomeView from'./inicio/inicio';import LoginForm from\"./login_registro/LoginForm\";import RegisterForm from\"./login_registro/RegisterForm\";import ClienteView from\"./clientes/clientes\";import ProductoView from\"./productos/productos\";import VentasView from\"./ventas/ventas\";import ProveedoresView from\"./proveedores/proveedores\";import UsuariosView from\"./UsuariosForm/UsuariosForm\";import'./styles.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isLoggedIn,setIsLoggedIn]=useState(false);const[userRole,setUserRole]=useState('');useEffect(()=>{const loggedInStatus=localStorage.getItem('isLoggedIn');const role=localStorage.getItem('userRole');if(loggedInStatus&&loggedInStatus==='true'){setIsLoggedIn(true);setUserRole(role);}},[]);// Al recargar la página, ejecutar la función de logout\nuseEffect(()=>{logout();},[]);const logout=()=>{setIsLoggedIn(false);setUserRole('');localStorage.removeItem('isLoggedIn');localStorage.removeItem('userRole');};// Componente de ruta privada para restringir el acceso a ciertas rutas si no está autenticado\nconst PrivateRoute=_ref=>{let{component:Component,allowedRoles,...rest}=_ref;return/*#__PURE__*/_jsx(Route,{...rest,render:props=>isLoggedIn&&allowedRoles.includes(userRole)?/*#__PURE__*/_jsx(Component,{...props}):/*#__PURE__*/_jsx(Redirect,{to:\"/auth\"})});};return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{isLoggedIn:isLoggedIn,onLogout:logout,userRole:userRole}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/inicio\",children:isLoggedIn?/*#__PURE__*/_jsx(WelcomeView,{}):/*#__PURE__*/_jsx(Redirect,{to:\"/auth\"})}),/*#__PURE__*/_jsx(Route,{path:\"/about\",children:/*#__PURE__*/_jsx(AboutPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/auth\",children:/*#__PURE__*/_jsx(LoginForm,{setIsLoggedIn:setIsLoggedIn,setUserRole:setUserRole})}),/*#__PURE__*/_jsx(Route,{path:\"/usuarios\",children:/*#__PURE__*/_jsx(RegisterForm,{})}),/*#__PURE__*/_jsx(PrivateRoute,{path:\"/ventas\",component:VentasView,allowedRoles:['admin','vendedor']}),/*#__PURE__*/_jsx(PrivateRoute,{path:\"/clientes\",component:ClienteView,allowedRoles:['admin','vendedor']}),/*#__PURE__*/_jsx(PrivateRoute,{path:\"/productos\",component:ProductoView,allowedRoles:['admin','vendedor']}),/*#__PURE__*/_jsx(PrivateRoute,{path:\"/proveedores\",component:ProveedoresView,allowedRoles:['admin']}),/*#__PURE__*/_jsx(PrivateRoute,{path:\"/UsuariosForm\",component:UsuariosView,allowedRoles:['admin']}),/*#__PURE__*/_jsx(Route,{path:\"/\",children:/*#__PURE__*/_jsx(HomePage,{})})]})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Route","Switch","Redirect","HomePage","AboutPage","Navbar","WelcomeView","LoginForm","RegisterForm","ClienteView","ProductoView","VentasView","ProveedoresView","UsuariosView","jsx","_jsx","jsxs","_jsxs","App","isLoggedIn","setIsLoggedIn","userRole","setUserRole","loggedInStatus","localStorage","getItem","role","logout","removeItem","PrivateRoute","_ref","component","Component","allowedRoles","rest","render","props","includes","to","children","onLogout","path"],"sources":["C:/Users/AUXTIC/Documents/Sellertatpro/Sellertatpro/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\nimport HomePage from \"./home/HomePage\";\nimport AboutPage from \"./home/AboutPage\";\nimport Navbar from './nav/Navbar';\nimport WelcomeView from './inicio/inicio';\nimport LoginForm from \"./login_registro/LoginForm\";\nimport RegisterForm from \"./login_registro/RegisterForm\";\nimport ClienteView from \"./clientes/clientes\";\nimport ProductoView from \"./productos/productos\";\nimport VentasView from \"./ventas/ventas\";\nimport ProveedoresView from \"./proveedores/proveedores\";\nimport UsuariosView from \"./UsuariosForm/UsuariosForm\";\nimport './styles.css';\n\nfunction App() {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [userRole, setUserRole] = useState('');\n\n  useEffect(() => {\n    const loggedInStatus = localStorage.getItem('isLoggedIn');\n    const role = localStorage.getItem('userRole');\n    if (loggedInStatus && loggedInStatus === 'true') {\n      setIsLoggedIn(true);\n      setUserRole(role);\n    }\n  }, []);\n\n  // Al recargar la página, ejecutar la función de logout\n  useEffect(() => {\n    logout();\n  }, []);\n\n  const logout = () => {\n    setIsLoggedIn(false);\n    setUserRole('');\n    localStorage.removeItem('isLoggedIn');\n    localStorage.removeItem('userRole');\n  };\n\n  // Componente de ruta privada para restringir el acceso a ciertas rutas si no está autenticado\n  const PrivateRoute = ({ component: Component, allowedRoles, ...rest }) => (\n    <Route {...rest} render={(props) => (\n      isLoggedIn && allowedRoles.includes(userRole)\n        ? <Component {...props} />\n        : <Redirect to='/auth' />\n    )} />\n  );\n\n  return (\n    <Router>\n      <div>\n        <Navbar isLoggedIn={isLoggedIn} onLogout={logout} userRole={userRole} />\n        <Switch>\n          <Route path=\"/inicio\">\n            {isLoggedIn ? <WelcomeView/> : <Redirect to=\"/auth\" />}\n          </Route>\n          <Route path=\"/about\">\n            <AboutPage />\n          </Route>\n          <Route path=\"/auth\">\n            <LoginForm setIsLoggedIn={setIsLoggedIn} setUserRole={setUserRole} />\n          </Route>\n          <Route path=\"/usuarios\">\n            <RegisterForm />\n          </Route>\n          <PrivateRoute path=\"/ventas\" component={VentasView} allowedRoles={['admin', 'vendedor']} />\n          <PrivateRoute path=\"/clientes\" component={ClienteView} allowedRoles={['admin', 'vendedor']} />\n          <PrivateRoute path=\"/productos\" component={ProductoView} allowedRoles={['admin', 'vendedor']} />\n          <PrivateRoute path=\"/proveedores\" component={ProveedoresView} allowedRoles={['admin']} />\n          <PrivateRoute path=\"/UsuariosForm\" component={UsuariosView} allowedRoles={['admin']} />\n          <Route path=\"/\">\n            <HomePage  />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}