{"ast":null,"code":"import React,{useState,useEffect}from'react';import Axios from'axios';import\"./UsuariosForm.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const UsuariosView=()=>{const[usuarios,setUsuarios]=useState([]);const[searchTerm,setSearchTerm]=useState('');const[editingUsuario,setEditingUsuario]=useState(null);const[editedUsuario,setEditedUsuario]=useState('');const[editedRol,setEditedRol]=useState('');useEffect(()=>{obtenerUsuarios();},[]);const obtenerUsuarios=async()=>{try{const response=await Axios.get('http://localhost:3001/auth');const usuariosData=response.data.body;setUsuarios(usuariosData);}catch(error){console.error('Error al obtener usuarios:',error);}};const handleEliminar=async usuario=>{if(window.confirm('¿Estás seguro de que deseas eliminar este usuario?')){try{await Axios.delete(\"http://localhost:3001/auth/usuario/nombre/\".concat(usuario));obtenerUsuarios();// Refrescar la lista de usuarios\n}catch(error){console.error('Error al eliminar usuario:',error);}}};const handleEditar=usuario=>{setEditingUsuario(usuario.usuario);setEditedUsuario(usuario.usuario);setEditedRol(usuario.rol);};const handleGuardarEdicion=async()=>{// Validaciones simples\nif(!editedUsuario||!editedRol){alert('Por favor, completa todos los campos.');return;}// Verifica si no hay cambios\nconst originalUsuario=usuarios.find(user=>user.usuario===editingUsuario);if(editedUsuario===editingUsuario&&editedRol===originalUsuario.rol){alert('No hay cambios para guardar.');setEditingUsuario(null);return;}// Confirmación antes de guardar cambios\nif(!window.confirm('¿Estás seguro de que deseas guardar los cambios?')){return;}try{await Axios.put(\"http://localhost:3001/auth/usuario/nombre/\".concat(editingUsuario),{usuario:editedUsuario,rol:editedRol});setEditingUsuario(null);obtenerUsuarios();// Refrescar la lista de usuarios\n}catch(error){console.error('Error al actualizar usuario:',error);}};// Función para filtrar usuarios por nombre\nconst filteredUsuarios=usuarios.filter(usuario=>{return usuario.usuario.toLowerCase().includes(searchTerm.toLowerCase());});return/*#__PURE__*/_jsxs(\"div\",{className:\"usuarios-view-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"usuarios-view-header\",children:\"Usuarios\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"search-container\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar usuario\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"input-text\"})}),/*#__PURE__*/_jsx(\"ul\",{className:\"usuarios-view-list\",children:filteredUsuarios.map(usuario=>/*#__PURE__*/_jsx(\"li\",{className:\"usuarios-view-list-item\",children:editingUsuario===usuario.usuario?/*#__PURE__*/_jsxs(\"div\",{className:\"edit-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editedUsuario,onChange:e=>setEditedUsuario(e.target.value),className:\"input-text\"}),/*#__PURE__*/_jsxs(\"select\",{value:editedRol,onChange:e=>setEditedRol(e.target.value),className:\"input-text\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"admin\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vendedor\",children:\"vendedor\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleGuardarEdicion,className:\"save-button\",children:\"Guardar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingUsuario(null),className:\"cancel-button\",children:\"Cancelar\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"usuario-info\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Usuario:\"}),\" \",usuario.usuario]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Rol:\"}),\" \",usuario.rol]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditar(usuario),className:\"edit-button\",children:\"Editar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEliminar(usuario.usuario),className:\"delete-button\",children:\"Eliminar\"})]})},usuario.idUsuario))})]});};export default UsuariosView;","map":{"version":3,"names":["React","useState","useEffect","Axios","jsx","_jsx","jsxs","_jsxs","UsuariosView","usuarios","setUsuarios","searchTerm","setSearchTerm","editingUsuario","setEditingUsuario","editedUsuario","setEditedUsuario","editedRol","setEditedRol","obtenerUsuarios","response","get","usuariosData","data","body","error","console","handleEliminar","usuario","window","confirm","delete","concat","handleEditar","rol","handleGuardarEdicion","alert","originalUsuario","find","user","put","filteredUsuarios","filter","toLowerCase","includes","className","children","type","placeholder","value","onChange","e","target","map","onClick","idUsuario"],"sources":["C:/Users/AUXTIC/Documents/Sellertatpro/Sellertatpro/client/src/UsuariosForm/UsuariosForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Axios from 'axios';\nimport \"./UsuariosForm.css\";\n\nconst UsuariosView = () => {\n  const [usuarios, setUsuarios] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [editingUsuario, setEditingUsuario] = useState(null);\n  const [editedUsuario, setEditedUsuario] = useState('');\n  const [editedRol, setEditedRol] = useState('');\n\n  useEffect(() => {\n    obtenerUsuarios();\n  }, []);\n\n  const obtenerUsuarios = async () => {\n    try {\n      const response = await Axios.get('http://localhost:3001/auth');\n      const usuariosData = response.data.body;\n      setUsuarios(usuariosData);\n    } catch (error) {\n      console.error('Error al obtener usuarios:', error);\n    }\n  };\n\n  const handleEliminar = async (usuario) => {\n    if (window.confirm('¿Estás seguro de que deseas eliminar este usuario?')) {\n      try {\n        await Axios.delete(`http://localhost:3001/auth/usuario/nombre/${usuario}`);\n        obtenerUsuarios(); // Refrescar la lista de usuarios\n      } catch (error) {\n        console.error('Error al eliminar usuario:', error);\n      }\n    }\n  };\n\n  const handleEditar = (usuario) => {\n    setEditingUsuario(usuario.usuario);\n    setEditedUsuario(usuario.usuario);\n    setEditedRol(usuario.rol);\n  };\n\n  const handleGuardarEdicion = async () => {\n    // Validaciones simples\n    if (!editedUsuario || !editedRol) {\n      alert('Por favor, completa todos los campos.');\n      return;\n    }\n\n    // Verifica si no hay cambios\n    const originalUsuario = usuarios.find(user => user.usuario === editingUsuario);\n    if (editedUsuario === editingUsuario && editedRol === originalUsuario.rol) {\n      alert('No hay cambios para guardar.');\n      setEditingUsuario(null);\n      return;\n    }\n\n    // Confirmación antes de guardar cambios\n    if (!window.confirm('¿Estás seguro de que deseas guardar los cambios?')) {\n      return;\n    }\n\n    try {\n      await Axios.put(`http://localhost:3001/auth/usuario/nombre/${editingUsuario}`, {\n        usuario: editedUsuario,\n        rol: editedRol,\n      });\n      setEditingUsuario(null);\n      obtenerUsuarios(); // Refrescar la lista de usuarios\n    } catch (error) {\n      console.error('Error al actualizar usuario:', error);\n    }\n  };\n\n  // Función para filtrar usuarios por nombre\n  const filteredUsuarios = usuarios.filter(usuario => {\n    return usuario.usuario.toLowerCase().includes(searchTerm.toLowerCase());\n  });\n\n  return (\n    <div className=\"usuarios-view-container\">\n      <h1 className=\"usuarios-view-header\">Usuarios</h1>\n      <hr />\n      <div className=\"search-container\">\n        <input\n          type=\"text\"\n          placeholder=\"Buscar usuario\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          className=\"input-text\"\n        />\n      </div>\n      <ul className=\"usuarios-view-list\">\n        {filteredUsuarios.map((usuario) => (\n          <li key={usuario.idUsuario} className=\"usuarios-view-list-item\">\n            {editingUsuario === usuario.usuario ? (\n              <div className=\"edit-form\">\n                <input\n                  type=\"text\"\n                  value={editedUsuario}\n                  onChange={(e) => setEditedUsuario(e.target.value)}\n                  className=\"input-text\"\n                />\n                <select\n                  value={editedRol}\n                  onChange={(e) => setEditedRol(e.target.value)}\n                  className=\"input-text\"\n                >\n                  <option value=\"admin\">admin</option>\n                  <option value=\"vendedor\">vendedor</option>\n                </select>\n                <button onClick={handleGuardarEdicion} className=\"save-button\">Guardar</button>\n                <button onClick={() => setEditingUsuario(null)} className=\"cancel-button\">Cancelar</button>\n              </div>\n            ) : (\n              <div className=\"usuario-info\">\n                <div><strong>Usuario:</strong> {usuario.usuario}</div>\n                <div><strong>Rol:</strong> {usuario.rol}</div>\n                <button onClick={() => handleEditar(usuario)} className=\"edit-button\">Editar</button>\n                <button onClick={() => handleEliminar(usuario.usuario)} className=\"delete-button\">Eliminar</button>\n              </div>\n            )}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default UsuariosView;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}